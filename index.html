<html>
     <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
var array = [['place' ,'Абрамова','Агеев','Асманов','Ахмедова','Беляев','Булатова','Бухмастов','Васильева','Власенко','Володин','Гатауллина','Гафарова','Грибанов','Григорьева','Дорофеев','Дурыманов','Закиров','Занозин','Зотов','Игумнов','Ильина','Капкаев','Коккарева','Корякин','Костенко','Кошкин','Кривобокова','Кулижников','Ловцев','Лоскутов','Лукасик','Макаренко','Мамонова','Мелихов','Мошулдаева','Несговорова','Нестеров','Огоров','Осетров','Пантиховская','Пивоварова','Пика','Сериков','Сидоров','Сколдинов','Смелая','Сулаймонов','Худояров','Черных','Юргенсон'],['10.11.2018',7,33,27,42,4,19,8,6,43,11,25,47,10,28,21,26,46,41,12,50,29,2,48,16,34,24,40,3,36,9,44,5,1,49,23,15,13,35,22,31,38,30,37,18,14,20,39,45,32,17],['11.11.2018',7,33,27,42,4,19,8,6,43,11,25,47,10,28,21,26,46,41,12,50,29,2,48,16,34,24,40,3,36,9,44,5,1,49,23,15,13,35,22,31,38,30,37,18,14,20,39,45,32,17],['12.11.2018',7,33,27,42,4,19,8,6,43,11,25,52,10,28,21,26,50,41,12,52,29,2,44,16,34,24,40,3,36,9,46,5,1,45,23,15,13,35,22,31,38,30,37,18,14,20,39,49,32,17],['13.11.2018',9,33,27,42,3,19,10,6,43,11,25,52,7,28,21,26,49,41,12,52,29,4,44,16,34,24,40,5,36,8,46,2,1,45,23,15,13,35,22,31,38,30,37,18,14,20,39,50,32,17],['14.11.2018',9,33,27,42,3,19,10,6,52,11,25,52,7,28,21,26,52,41,12,52,29,4,52,16,34,24,40,5,36,8,52,2,1,52,23,15,13,35,22,31,38,30,37,18,14,20,39,52,32,17],['16.11.2018',7,34,25,42,3,18,11,8,52,5,26,52,9,28,21,27,52,41,12,52,30,4,52,17,35,24,40,6,36,10,52,2,1,52,23,16,13,29,22,32,38,31,37,20,14,15,39,52,33,19],['17.11.2018',7,35,26,42,3,18,11,8,52,5,27,52,9,29,21,28,52,37,12,52,31,4,52,17,36,25,41,6,30,10,52,2,1,52,24,16,13,23,22,33,39,32,38,20,14,15,40,52,34,19],['21.11.2018',10,43,27,52,2,17,12,4,52,8,34,36,3,30,18,35,52,44,14,52,31,7,23,20,48,26,52,9,40,5,52,1,6,24,25,16,11,28,21,41,52,32,46,19,13,15,52,52,42,22],['24.11.2018',10,43,27,52,2,17,12,5,52,3,34,36,4,30,19,35,52,44,14,52,31,8,23,21,48,26,52,9,40,6,52,1,7,24,25,16,11,28,18,41,52,32,46,20,13,15,52,52,42,22],['28.11.2018',10,47,29,52,2,19,12,5,52,3,39,30,4,35,21,40,52,48,15,52,37,8,18,23,52,28,52,9,42,6,52,1,7,14,26,17,11,34,20,45,52,38,49,22,13,16,52,52,46,25],['30.11.2018',10,49,29,52,2,19,13,5,52,3,39,30,4,35,22,40,52,50,12,52,37,8,18,24,41,28,52,9,43,6,52,1,7,15,26,17,11,34,20,47,52,38,52,23,14,16,52,52,48,21],['04.12.2018',10,50,29,52,2,19,13,5,52,3,40,30,4,35,22,41,52,52,12,52,37,8,18,24,42,28,52,9,44,6,52,1,7,15,26,17,11,34,20,47,52,38,52,23,14,16,52,52,48,21]];		var isSelected = false;
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable(array);

        var options = {
          title: 'IKT',
          curveType: 'function',
          legend: { position: 'right' },
			vAxis: {
				viewWindow:{
					max:50,
					min:0
				},
				direction: '-1'
			},
			yAxis: {
				gridlines: { color: "black" } 
			}
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);


		var names = array[0];
		// console.log(names);
		var number = 60;
		for (var name of names){
			// console.log(name);
			if (name == "Абрамова") {
				// console.log("!!!!!");
				number = names.indexOf("Абрамова") - 1;
				}
		}

		options.series = {}



		// options.series[number] = {color: 'black'};
		chart.draw(data, options);
		progres();
	}

	  function checkIt(){
		N = document.getElementById("TEXTBOX_ID").value
		var names = array[0];
		var c = []
		for (var name of names){
			if (name.toLowerCase().startsWith(N.toLowerCase())) {
				c.push(names.indexOf(name)) }
		}

		console.log(c, c.length)

		if (names.length > c.length > 0) {
			document.getElementById("1").innerHTML="";
			var data = google.visualization.arrayToDataTable(array);
			var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
			var options = {
			  title: 'IKT',
			  curveType: 'function',
			  legend: { position: 'right' },
				vAxis: {
					viewWindow:{
						max:50,
						min:0
					},
					direction: '-1'
				},
				yAxis: {
					gridlines: { color: "black" } 
				}
			};
			options.series = {}
			dict = {}
			for (var el of c){
				console.log(el)
				for (var name of names){ 
					i = names.indexOf(name) - 1
					if (i+1 == el) {
						console.log(name, i, i == el)
						dict[i] = {color: 'black'}; }
					else {
						if ((i in dict) && ("color" in dict[i])){
							if (dict[i].color != "black") {
								dict[i] = {color: '#eadfa6'}; 
							}
						}
						else{
							dict[i] = {color: '#eadfa6'}; 
							}
					}

				}
			};
			options.series = dict
			console.log(options.series)

			chart.draw(data, options);
			isSelected = true;

		}
		else {			
			document.getElementById("1").innerHTML="ноуп";
			if (isSelected) {
				var data = google.visualization.arrayToDataTable(array);

				var options = {
				  title: 'IKT',
				  curveType: 'function',
				  legend: { position: 'right' },
					vAxis: {
						viewWindow:{
							max:50,
							min:0
						},
						direction: '-1'
					},
					yAxis: {
						gridlines: { color: "black" } 
					}
				};

				var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

				chart.draw(data, options);
				isSelected = false;
			}

		}

	}

		function train(x) {
			var date = new Date;
			if (document.getElementById(x).checked) date.setDate(date.getDate() + 30);
			else date.setDate(date.getDate() - 1);
			document.cookie = x+"=1"+"; path=/; expires= " + date.toUTCString();
			progres();
		}

		function progres() {
			var q = 0;

			for (i = 1; i < 15; i++) {
				if (getCookie(i)!=null) {
					document.getElementById(i).checked=true;
					q++;
				}
			}
			if (q>0){
				var temp = Math.round((+q/13)*100 * 10) / 10;

				document.getElementById("prog").innerHTML="Прогресс "+ temp+ "%";
				if (temp<51) document.getElementById("prog").style.color = "red";
				else {
					if (temp<81) document.getElementById("prog").style.color = "#ff5a00";
					else document.getElementById("prog").style.color = "green";
				}
			}

		}


		function getCookie(name) {
			var cookie = " " + document.cookie;
			var search = " " + name + "=";
			var setStr = null;
			var offset = 0;
			var end = 0;
			if (cookie.length > 0) {
				offset = cookie.indexOf(search);
				if (offset != -1) {
					offset += search.length;
					end = cookie.indexOf(";", offset)
					if (end == -1) {
						end = cookie.length;
					}
					setStr = unescape(cookie.substring(offset, end));
				}
			}
			return(setStr);
		}



    </script>
  </head>
  <body>




  <div>
	Введи свою фамилию: <input type="text" id="TEXTBOX_ID" oninput="checkIt()"><div id="1"></div></div>
    <div id="curve_chart" style="width: 100%; height: 100%"></div>
	Проверь, сколько осталось! (Используются куки, для расчета прогресса - нажимать на чекбоксы)
	<div id="prog">  </div>
	<table>
		<tr style="">
			<td style="background-color: #fff47275; width: 30%;">K3415</td>
			<td style="background-color: #ff727275;">Общее</td>
			<td style="background-color: #72a4ff75; width: 20%;">K3420</td>
		</tr><tr>
			<td style="background-color: #fff47275;">
			Дубаков: 
			<ul>

			<li><input type="checkbox" id="1" onchange="train(1)"> Реферат в печатном виде
			<ul>
			<li><input type="checkbox" id="2" onchange="train(2)"> Презентация по реферату 
			</ul>
			<li><input type="checkbox" id="3" onchange="train(3)"> 4 модуля по курсу Veeam: 
			<ul>
			<li> Перевод в виде краткого конспекта модуля 
			<li> Скриншоты выполненных заданий после модуля (и в модуле)
			</ul>
			<li> 12 декабря тест по ВИМУ и рубежка!
			<li><input type="checkbox" id="14" onchange="train(14)"> 13 упражнений после лекций до 12 декабря!  

			</ul>
			</td>
			<td style="background-color: #ff727275;">
			Гуревич: 
			<ul>
			<li>
			<input type="checkbox" id="4" onchange="train(4)">бизнес-план 
			</ul>
			Иванов: 
			<ul>
			<li><input type="checkbox" id="5" onchange="train(5)">8 лаб
			</ul>
			Ананченко: 
			<ul>
			<li><input type="checkbox" id="6" onchange="train(6)"> 6 лаб по винде
			<li><input type="checkbox" id="7" onchange="train(7)"> 5 лаб по линуксу
			<li><input type="checkbox" id="8" onchange="train(8)"> реферат
			<li><input type="checkbox" id="9" onchange="train(9)">два теста на сайте
			</ul>
			Мультимедия: 
			<ul><li><input type="checkbox" id="10" onchange="train(10)">реферат</ul>
			ПО(нусечка): 
			<ul><li><input type="checkbox" id="11" onchange="train(11)">5 лаб, 
			<li><input type="checkbox" id="12" onchange="train(12)">домашка</ul>
			<br>Облачные(Ира): 
			<ul><li><input type="checkbox" id="13" onchange="train(13)">5 лаб</ul>
			</td>
			<td style="background-color: #72a4ff75;">
			? (Напишите мне, добавлю и вашу домашку)




			</td>
		</tr>
	</table>

  </body>
</html>  