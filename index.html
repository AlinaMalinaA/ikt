<html>
     <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
var names_groups = {'Коккарева Ольга Владимировна': '3400', 'Меркушев Александр Евгеньевич': '3400', 'Мелихов Григорий Федорович': '3400', 'Наумов Виталий Денисович': '3400', 'Чернова Яна Александровна': '3440', 'Кириленко Анастасия Евгеньевна': '3440', 'Клевцова Елизавета Александровна': '3440', 'Алексеева Ольга Вадимовна': '3440', 'Гафарова Зарина Руслановна': '3400', 'Соломатина Елизавета Сергеевна': '3440', 'Редчиц Анастасия Валерьевна': '3440', 'Иванова Татьяна Николаевна': '3440', 'Костин Евгений Владимирович': '3440', 'Аникиенко Юлия Владимировна': '3440', 'Сачаво Антон Станиславович': '3440', 'Абрамова Алина Александровна': '3415', 'Макаренко Антон Семенович': '3410', 'Пономарев Дмитрий Дмитриевич': '3440', 'Юргенсон Олег Александрович': '3415', 'Куксов Алексей Александрович': '3440', 'Потапов Владислав Александрович': '3440', 'Васильева Екатерина Юрьевна': '3410', 'Саляев Алексей Витальевич': '3400', 'Осетров Дмитрий Кириллович': '3420', 'Лысенко Федор Михайлович': '3440', 'Беляев Иван Дмитриевич': '3410', 'Пастухов Алексей Владимирович': '3400', 'Смелая Екатерина Владимировна': '3420', 'Отсенге Коломб Наоми': '3400', 'Лоскутов Владимир Николаевич': '3410', 'Григорьева Мария Васильевна': '3420', 'Грибанов Тимофей Александрович': '3410', 'Ильина Светлана Максимовна': '3420', 'Капкаев Даниил Русланович': '3420', 'Мамонова Анастасия Антоновна': '3420', 'Булатова Регина Юльевна': '3420', 'Дорофеев Дмитрий Владимирович': '3420', 'Лукасик Александра Сергеевна': '3420', 'Нестеров Александр Александрович': '3420', 'Несговорова Ольга Сергеевна': '3420', 'Мошулдаева Цаган Белг Баатровна': '3420', 'Асманов Кирилл Алексеевич': '3420', 'Володин Артем Максимович': '3420', 'Корякин Антон Николаевич': '3420', 'Власенко Дмитрий Михайлович': '3420', 'Кулижников Никита Алексеевич': '3420', 'Ахмедова Самара Гюндюз кызы': '3442', 'Зотов Владислав Дмитриевич': '3415', 'Джаманкулов Амантур': '3400', 'Мба Айнгоно Аказио Нзобейя': '3400'}
var dates = ['31.12','01.01','04.01','05.01','03.02','04.02']
var names_places = {'Капкаев Даниил Русланович': [1, 1, 1, 1, 20, 34], 'Ахмедова Самара Гюндюз кызы': [2, 52, 52, 52, 52, 48], 'Смелая Екатерина Владимировна': [3, 2, 2, 2, 14, 28], 'Макаренко Антон Семенович': [4, 3, 3, 3, 7, 17], 'Мамонова Анастасия Антоновна': [5, 4, 4, 4, 21, 35], 'Коккарева Ольга Владимировна': [6, 5, 5, 5, 1, 1], 'Беляев Иван Дмитриевич': [7, 6, 6, 6, 12, 26], 'Васильева Екатерина Юрьевна': [8, 7, 7, 7, 9, 22], 'Григорьева Мария Васильевна': [9, 8, 8, 8, 17, 31], 'Булатова Регина Юльевна': [10, 9, 9, 9, 23, 37], 'Дорофеев Дмитрий Владимирович': [11, 10, 10, 10, 24, 38], 'Кулижников Никита Алексеевич': [12, 11, 11, 11, 33, 47], 'Юргенсон Олег Александрович': [13, 12, 12, 12, 8, 19], 'Закиров Зелимхан Абдул-Халитович': [14, 13, 13, 52, 52, 52], 'Лоскутов Владимир Николаевич': [15, 14, 14, 13, 16, 30], 'Нестеров Александр Александрович': [16, 15, 15, 14, 26, 40], 'Мелихов Григорий Федорович': [17, 16, 16, 15, 3, 3], 'Бардашова Анна Сергеевна': [18, 17, 17, 52, 52, 52], 'Грибанов Тимофей Александрович': [19, 18, 18, 16, 18, 32], 'Несговорова Ольга Сергеевна': [20, 19, 19, 17, 27, 41], 'Володин Артем Максимович': [21, 20, 20, 18, 30, 44], 'Игумнов Андрей Вячеславович': [22, 21, 21, 52, 52, 52], 'Мошулдаева Цаган Белг Баатровна': [23, 22, 22, 19, 28, 42], 'Сколдинов Олег Алексеевич': [24, 23, 23, 20, 52, 52], 'Бухмастов Алексей Дмитриевич': [25, 24, 24, 21, 52, 52], 'Меркушев Александр Евгеньевич': [26, 25, 25, 22, 2, 2], 'Абрамова Алина Александровна': [27, 26, 31, 23, 6, 16], 'Гафарова Зарина Руслановна': [28, 27, 33, 24, 5, 9], 'Асманов Кирилл Алексеевич': [29, 28, 34, 25, 29, 43], 'Пастухов Алексей Владимирович': [30, 29, 35, 26, 13, 27], 'Лукасик Александра Сергеевна': [31, 30, 36, 27, 25, 39], 'Мба Айнгоно Аказио Нзобейя': [32, 31, 37, 28, 35, 50], 'Отсенге Коломб Наоми': [33, 32, 38, 29, 15, 29], 'Наумов Виталий Денисович': [34, 33, 39, 30, 4, 4], 'Саляев Алексей Витальевич': [35, 34, 40, 31, 10, 23], 'Шадрин Ярослав Александрович': [36, 35, 41, 32, 52, 52], 'Джаманкулов Амантур': [37, 36, 43, 33, 22, 36], 'Корякин Антон Николаевич': [38, 37, 44, 34, 31, 45], 'Клевцова Елизавета Александровна': [39, 38, 26, 52, 52, 7], 'Соломатина Елизавета Сергеевна': [40, 39, 28, 52, 52, 10], 'Зотов Владислав Дмитриевич': [41, 40, 45, 35, 34, 49], 'Редчиц Анастасия Валерьевна': [42, 41, 30, 52, 52, 11], 'Костин Евгений Владимирович': [43, 42, 46, 52, 52, 13], 'Кириленко Анастасия Евгеньевна': [44, 43, 27, 52, 52, 6], 'Чернова Яна Александровна': [45, 44, 29, 52, 52, 5], 'Алексеева Ольга Вадимовна': [46, 45, 47, 52, 52, 8], 'Иванова Татьяна Николаевна': [47, 46, 32, 52, 52, 12], 'Гатауллина Даяна Маликовна': [48, 47, 48, 36, 52, 52], 'Кубанычбекова Айгель': [49, 48, 49, 37, 52, 52], 'Сидоров Дмитрий Александрович': [50, 49, 52, 52, 52, 52], 'Никитина Светлана Евгеньевна': [52, 52, 42, 52, 52, 52], 'Осетров Дмитрий Кириллович': [52, 52, 52, 52, 11, 24], 'Ильина Светлана Максимовна': [52, 52, 52, 52, 19, 33], 'Власенко Дмитрий Михайлович': [52, 52, 52, 52, 32, 46], 'Аникиенко Юлия Владимировна': [52, 52, 52, 52, 52, 14], 'Сачаво Антон Станиславович': [52, 52, 52, 52, 52, 15], 'Пономарев Дмитрий Дмитриевич': [52, 52, 52, 52, 52, 18], 'Куксов Алексей Александрович': [52, 52, 52, 52, 52, 20], 'Потапов Владислав Александрович': [52, 52, 52, 52, 52, 21], 'Лысенко Федор Михайлович': [52, 52, 52, 52, 52, 25]}

show_only = [];
var array = []


function discriminate_them(x=[]) {
	if (x.length != 0) {
		if (show_only.length == 0) {
			show_only = x
		}
	}

	var sorted_names = []; 

	for (var i = 0; i <= dates.length; i++) {
	array[i] = []
	}

	if (show_only.length == 0) {
		for (var name in names_groups) {
			sorted_names.push(name)
		}	
	}
	else{
		for (var name in names_groups) {
			group = names_groups[name]
			if (show_only.includes(group)){ sorted_names.push(name) }
		}
	}

	sorted_names.sort();
	temp2 = []
	
	for (var i = 0; i < dates.length; i++) {
		temp2.push(dates[i])
		for (var j = 0; j < sorted_names.length; j++) { temp2.push(names_places[sorted_names[j]][i]) }
		array[i+1] = temp2
		temp2 = []
	}
	var temp3 = []
	for (var i = 0; i < sorted_names.length; i++) {
		name = sorted_names[i]
		temp3.push(name.split(" ")[0] + " " + name.split(" ")[1][0] + ".")
	}
	sorted_names = temp3
	var _ = sorted_names.splice(0, 0, 'place');
	array[0] = sorted_names

}

function myFunction(group){
	if (document.getElementById(group).checked==true){
		show_only.push(group)
	}
	else{
		id = show_only.indexOf(group) 
		show_only.splice(id, 1);
	}
	console.log(show_only)
	discriminate_them()
	google.charts.load('current', {'packages':['corechart']});
	google.charts.setOnLoadCallback(drawChart);
}


discriminate_them()




var isSelected = false;
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

	function drawChart() {

        var data = google.visualization.arrayToDataTable(array);

        var options = {
          title: 'IKT',
          curveType: 'function',
          legend: { position: 'right' },
			vAxis: {
				viewWindow:{
					max:50,
					min:0
				},
				direction: '-1'
			},
			yAxis: {
				gridlines: { color: "black" } 
			}
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);


		var names = array[0];
		// console.log(names);
		var number = 60;

		options.series = {}

		chart.draw(data, options);
		progres();
	}

	  function checkIt(){
		N = document.getElementById("TEXTBOX_ID").value
		var names = array[0];
		var c = []
		for (var name of names){
			if (name.toLowerCase().startsWith(N.toLowerCase())) {
				c.push(names.indexOf(name)) }
		}

		// console.log(c, c.length)

		if (names.length > c.length > 0) {
			document.getElementById("1").innerHTML="";
			var data = google.visualization.arrayToDataTable(array);
			var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
			var options = {
			  title: 'IKT',
			  curveType: 'function',
			  legend: { position: 'right' },
				vAxis: {
					viewWindow:{
						max:50,
						min:0
					},
					direction: '-1'
				},
				yAxis: {
					gridlines: { color: "black" } 
				}
			};
			options.series = {}
			dict = {}
			for (var el of c){
				console.log(el)
				for (var name of names){ 
					i = names.indexOf(name) - 1
					if (i+1 == el) {
						console.log(name, i, i == el)
						dict[i] = {color: 'black'}; }
					else {
						if ((i in dict) && ("color" in dict[i])){
							if (dict[i].color != "black") {
								dict[i] = {color: '#eadfa6'}; 
							}
						}
						else{
							dict[i] = {color: '#eadfa6'}; 
							}
					}

				}
			};
			options.series = dict
			console.log(options.series)

			chart.draw(data, options);
			isSelected = true;

		}
		else {			
			document.getElementById("1").innerHTML="ноуп";
			if (isSelected) {
				var data = google.visualization.arrayToDataTable(array);

				var options = {
				  title: 'IKT',
				  curveType: 'function',
				  legend: { position: 'right' },
					vAxis: {
						viewWindow:{
							max:50,
							min:0
						},
						direction: '-1'
					},
					yAxis: {
						gridlines: { color: "black" } 
					}
				};

				var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

				chart.draw(data, options);
				isSelected = false;
			}

		}

	}

		function train(x) {
			var date = new Date;
			if (document.getElementById(x).checked) date.setDate(date.getDate() + 30);
			else date.setDate(date.getDate() - 1);
			document.cookie = x+"=1"+"; path=/; expires= " + date.toUTCString();
			progres();
		}

		function progres() {
			var q = 0;

			for (i = 1; i < 15; i++) {
				if (getCookie(i)!=null) {
					document.getElementById(i).checked=true;
					q++;
				}
			}
			if (q>0){
				var temp = Math.round((+q/13)*100 * 10) / 10;

				document.getElementById("prog").innerHTML="Прогресс "+ temp+ "%";
				if (temp<51) document.getElementById("prog").style.color = "red";
				else {
					if (temp<81) document.getElementById("prog").style.color = "#ff5a00";
					else document.getElementById("prog").style.color = "green";
				}
			}

		}


		function getCookie(name) {
			var cookie = " " + document.cookie;
			var search = " " + name + "=";
			var setStr = null;
			var offset = 0;
			var end = 0;
			if (cookie.length > 0) {
				offset = cookie.indexOf(search);
				if (offset != -1) {
					offset += search.length;
					end = cookie.indexOf(";", offset)
					if (end == -1) {
						end = cookie.length;
					}
					setStr = unescape(cookie.substring(offset, end));
				}
			}
			return(setStr);
		}



    </script>
  </head>
  <body>




  <div>
	Введи свою фамилию: <input type="text" id="TEXTBOX_ID" oninput="checkIt()">    Показывать только: 
	3400<input type="checkbox" id="3400" onclick="myFunction('3400')">
	3410<input type="checkbox" id="3410" onclick="myFunction('3410')">
	3415<input type="checkbox" id="3415" onclick="myFunction('3415')">
	3420<input type="checkbox" id="3420" onclick="myFunction('3420')">
	3440<input type="checkbox" id="3440" onclick="myFunction('3440')">
	3442<input type="checkbox" id="3442" onclick="myFunction('3442')">
	<a href="telepaty.html">Играть</a> | <a href="radio.html">Радиоприемники</a>
	<div id="1"></div></div>
    <div id="curve_chart" style="width: 100%; height: 100%"></div>


  </body>
</html>  